# WanMap v2 - å®Œå…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**ä½œæˆæ—¥**: 2025-11-24  
**æœ€çµ‚æ›´æ–°**: 2025-11-24  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.5.0 (Phase 5å®Œäº†ã€Phase 3ä¸€éƒ¨å®Ÿè£…ä¸­)

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [ç”»é¢é·ç§»å›³](#ç”»é¢é·ç§»å›³)
4. [å®Ÿè£…çŠ¶æ³ãƒãƒˆãƒªãƒƒã‚¯ã‚¹](#å®Ÿè£…çŠ¶æ³ãƒãƒˆãƒªãƒƒã‚¯ã‚¹)
5. [å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ãƒ»APIæƒ…å ±](#å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹apiæƒ…å ±)
6. [é–‹ç™ºãƒ«ãƒ¼ãƒ«ã¨åŸå‰‡](#é–‹ç™ºãƒ«ãƒ¼ãƒ«ã¨åŸå‰‡)
7. [æ—¢çŸ¥ã®å•é¡Œã¨è§£æ±ºç­–](#æ—¢çŸ¥ã®å•é¡Œã¨è§£æ±ºç­–)
8. [ä»Šå¾Œã®ã‚¿ã‚¹ã‚¯](#ä»Šå¾Œã®ã‚¿ã‚¹ã‚¯)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
**WanMap** - æ„›çŠ¬ã®æ•£æ­©ãƒ«ãƒ¼ãƒˆå…±æœ‰ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª

### ğŸ‘¤ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼
- **åå‰**: æˆæ²¢æ•¦å² (Atsushi Narisawa)
- **è·æ¥­**: å¤§æ‰‹åºƒå‘Šä»£ç†åº—å‡ºèº«ã®ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆå…¼ãƒšãƒƒãƒˆäº‹æ¥­èµ·æ¥­å®¶
- **å¹´é½¢**: 43æ­³
- **äº‹æ¥­**: DogHubï¼ˆç¥å¥ˆå·çœŒè¶³æŸ„ä¸‹éƒ¡ç®±æ ¹ç”ºï¼‰- çŠ¬ã®ãƒ›ãƒ†ãƒ«ãƒ»ã‚«ãƒ•ã‚§äº‹æ¥­é‹å–¶

### ğŸ¯ ã‚¢ãƒ—ãƒªã®ç›®çš„
æ„›çŠ¬ã¨ã®æ•£æ­©ã‚’è¨˜éŒ²ãƒ»å…±æœ‰ã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’å½¢æˆã™ã‚‹ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
ç®±æ ¹ã‚’æ‹ ç‚¹ã¨ã—ãŸå…¬å¼ãƒ«ãƒ¼ãƒˆã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ—¥å¸¸æ•£æ­©è¨˜éŒ²ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã€‚

### ğŸ“± ä¸»è¦æ©Ÿèƒ½
1. **2ãƒ¢ãƒ¼ãƒ‰åˆ¶æ•£æ­©è¨˜éŒ²**
   - Dailyï¼ˆæ—¥å¸¸æ•£æ­©ï¼‰: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨˜éŒ²
   - Outingï¼ˆãŠã§ã‹ã‘æ•£æ­©ï¼‰: å…¬å¼ãƒ«ãƒ¼ãƒˆã‚’æ­©ã

2. **å…¬å¼ãƒ«ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ **
   - ã‚¨ãƒªã‚¢åˆ¥æ¨å¥¨ãƒ«ãƒ¼ãƒˆï¼ˆç®±æ ¹ã€æ¨ªæµœã€éŒå€‰ï¼‰
   - é›£æ˜“åº¦ãƒ»è·é›¢ãƒ»æ‰€è¦æ™‚é–“è¡¨ç¤º

3. **ãƒ”ãƒ³æŠ•ç¨¿æ©Ÿèƒ½**
   - æ™¯è‰²/åº—èˆ—/å‡ºä¼šã„/ãã®ä»–ã®4ã‚¿ã‚¤ãƒ—
   - å†™çœŸæ·»ä»˜ï¼ˆæœ€å¤§5æšï¼‰
   - ã„ã„ã­æ©Ÿèƒ½

4. **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼
   - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
   - é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

5. **ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ **
   - 17ç¨®é¡ã®åˆæœŸãƒãƒƒã‚¸
   - 5ã‚«ãƒ†ã‚´ãƒªÃ—4ãƒ†ã‚£ã‚¢

6. **ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ**
   - ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ10kmã§1ãƒ¬ãƒ™ãƒ«ï¼‰
   - ç·è·é›¢ãƒ»æ•£æ­©å›æ•°ãƒ»è¨ªå•ã‚¨ãƒªã‚¢æ•°

---

## å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | çŠ¶æ…‹ |
|---------|------|-----------|------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Flutter | 3.38.2 | âœ… |
| è¨€èª | Dart | 3.0+ | âœ… |
| çŠ¶æ…‹ç®¡ç† | Riverpod | 2.6.1 | âœ… å®Œå…¨ç§»è¡Œæ¸ˆã¿ |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Supabase | - | âœ… |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | PostgreSQL + PostGIS | - | âœ… |
| èªè¨¼ | Supabase Auth | - | âœ… |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | Supabase Storage | - | âš ï¸ ä¸€éƒ¨ |
| åœ°å›³è¡¨ç¤º | Flutter Map | 6.1.0 | âœ… |
| åœ°å›³ã‚¿ã‚¤ãƒ« | Thunderforest | Outdoors API | âš ï¸ |
| GPSè¿½è·¡ | Geolocator | 11.0.0 | âœ… |
| ç”»åƒé¸æŠ | Image Picker | æœ€æ–° | âœ… |

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
wanmap_v2/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                    # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ (Riverpodå¯¾å¿œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                      # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ env.dart                 # ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿
â”‚   â”‚   â”œâ”€â”€ supabase_config.dart     # Supabaseè¨­å®š
â”‚   â”‚   â”œâ”€â”€ wanmap_colors.dart       # ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ wanmap_typography.dart   # ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£
â”‚   â”‚   â””â”€â”€ wanmap_spacing.dart      # ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°å®šæ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ models/ (24å€‹)               # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ walk_mode.dart           # Daily/Outing enum
â”‚   â”‚   â”œâ”€â”€ area.dart                # ã‚¨ãƒªã‚¢ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ official_route.dart      # å…¬å¼ãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ route_pin.dart           # ãƒ”ãƒ³æŠ•ç¨¿
â”‚   â”‚   â”œâ”€â”€ route_model.dart         # æ•£æ­©ãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ walk_history.dart        # æ•£æ­©å±¥æ­´
â”‚   â”‚   â”œâ”€â”€ user_statistics.dart     # ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ
â”‚   â”‚   â”œâ”€â”€ badge.dart               # ãƒãƒƒã‚¸
â”‚   â”‚   â”œâ”€â”€ notification_model.dart  # é€šçŸ¥
â”‚   â”‚   â”œâ”€â”€ follow_model.dart        # ãƒ•ã‚©ãƒ­ãƒ¼
â”‚   â”‚   â”œâ”€â”€ like_model.dart          # ã„ã„ã­
â”‚   â”‚   â””â”€â”€ ...                      # ä»–20å€‹ã®ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/ (22å€‹)            # RiverpodçŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ auth_provider.dart       # èªè¨¼
â”‚   â”‚   â”œâ”€â”€ theme_provider.dart      # ãƒ†ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ gps_provider_riverpod.dart  # GPSè¿½è·¡
â”‚   â”‚   â”œâ”€â”€ area_provider.dart       # ã‚¨ãƒªã‚¢
â”‚   â”‚   â”œâ”€â”€ official_route_provider.dart # å…¬å¼ãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ route_pin_provider.dart  # ãƒ”ãƒ³
â”‚   â”‚   â”œâ”€â”€ walk_mode_provider.dart  # æ•£æ­©ãƒ¢ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ user_statistics_provider.dart # çµ±è¨ˆ
â”‚   â”‚   â”œâ”€â”€ badge_provider.dart      # ãƒãƒƒã‚¸
â”‚   â”‚   â”œâ”€â”€ social_provider.dart     # ã‚½ãƒ¼ã‚·ãƒ£ãƒ«
â”‚   â”‚   â”œâ”€â”€ notification_provider.dart # é€šçŸ¥
â”‚   â”‚   â”œâ”€â”€ favorites_provider.dart  # ãŠæ°—ã«å…¥ã‚Š
â”‚   â”‚   â”œâ”€â”€ route_search_provider.dart # æ¤œç´¢
â”‚   â”‚   â””â”€â”€ ...                      # ä»–10å€‹ã®Provider
â”‚   â”‚
â”‚   â”œâ”€â”€ services/ (28å€‹)             # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ auth_service.dart
â”‚   â”‚   â”œâ”€â”€ gps_service.dart         # GPSè¨˜éŒ²
â”‚   â”‚   â”œâ”€â”€ photo_service.dart       # å†™çœŸç®¡ç† âœ…
â”‚   â”‚   â”œâ”€â”€ storage_service.dart     # Storageæ“ä½œ
â”‚   â”‚   â”œâ”€â”€ walk_save_service.dart   # æ•£æ­©ä¿å­˜
â”‚   â”‚   â”œâ”€â”€ walk_history_service.dart
â”‚   â”‚   â”œâ”€â”€ user_statistics_service.dart
â”‚   â”‚   â”œâ”€â”€ badge_service.dart
â”‚   â”‚   â”œâ”€â”€ social_service.dart
â”‚   â”‚   â”œâ”€â”€ notification_service.dart
â”‚   â”‚   â”œâ”€â”€ favorite_service.dart
â”‚   â”‚   â”œâ”€â”€ route_search_service.dart
â”‚   â”‚   â””â”€â”€ ...                      # ä»–16å€‹ã®Service
â”‚   â”‚
â”‚   â”œâ”€â”€ screens/ (35ç”»é¢)            # UIç”»é¢
â”‚   â”‚   â”œâ”€â”€ auth/ (3)
â”‚   â”‚   â”‚   â”œâ”€â”€ login_screen.dart    # âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ signup_screen.dart   # âœ…
â”‚   â”‚   â”‚   â””â”€â”€ password_reset_screen.dart # âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ main/ (5)
â”‚   â”‚   â”‚   â”œâ”€â”€ main_screen.dart     # 4ã‚¿ãƒ–ãƒ¡ã‚¤ãƒ³ç”»é¢ âœ…
â”‚   â”‚   â”‚   â””â”€â”€ tabs/
â”‚   â”‚   â”‚       â”œâ”€â”€ home_tab.dart    # ãƒ›ãƒ¼ãƒ ã‚¿ãƒ– âœ…
â”‚   â”‚   â”‚       â”œâ”€â”€ map_tab.dart     # ãƒãƒƒãƒ—ã‚¿ãƒ– âš ï¸ ã‚¿ã‚¤ãƒ«å•é¡Œ
â”‚   â”‚   â”‚       â”œâ”€â”€ records_tab.dart # è¨˜éŒ²ã‚¿ãƒ– âœ…
â”‚   â”‚   â”‚       â””â”€â”€ profile_tab.dart # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¿ãƒ– âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ daily/ (2)
â”‚   â”‚   â”‚   â”œâ”€â”€ daily_walk_view.dart         # æ—¥å¸¸æ•£æ­©é–‹å§‹ âœ…
â”‚   â”‚   â”‚   â””â”€â”€ daily_walking_screen.dart    # æ•£æ­©ä¸­ç”»é¢ âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ outing/ (7)
â”‚   â”‚   â”‚   â”œâ”€â”€ outing_walk_view.dart        # ãŠã§ã‹ã‘é–‹å§‹ âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ outing_walk_view_v2.dart     # v2 âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ area_list_screen.dart        # ã‚¨ãƒªã‚¢ä¸€è¦§ âŒ ã‚¨ãƒ©ãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ route_list_screen.dart       # ãƒ«ãƒ¼ãƒˆä¸€è¦§ âš ï¸
â”‚   â”‚   â”‚   â”œâ”€â”€ route_detail_screen.dart     # ãƒ«ãƒ¼ãƒˆè©³ç´° âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ walking_screen.dart          # æ•£æ­©ä¸­ âœ…
â”‚   â”‚   â”‚   â””â”€â”€ pin_create_screen.dart       # ãƒ”ãƒ³æŠ•ç¨¿ âš ï¸
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/ (4)
â”‚   â”‚   â”‚   â”œâ”€â”€ favorites_screen.dart        # ãŠæ°—ã«å…¥ã‚Š âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ public_routes_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ route_edit_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ routes_list_screen.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ social/ (7)
â”‚   â”‚   â”‚   â”œâ”€â”€ timeline_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ user_search_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ follow_list_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ followers_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ following_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ notification_center_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ popular_routes_screen.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ profile/ (2)
â”‚   â”‚   â”‚   â”œâ”€â”€ user_profile_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ statistics_dashboard_screen.dart # âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ history/ (1)
â”‚   â”‚   â”‚   â””â”€â”€ walk_history_screen.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ search/ (1)
â”‚   â”‚   â”‚   â””â”€â”€ route_search_screen.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ notifications/ (1)
â”‚   â”‚   â”‚   â””â”€â”€ notifications_screen.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ map/ (1)
â”‚   â”‚   â”‚   â””â”€â”€ map_screen.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ legal/ (2)
â”‚   â”‚       â”œâ”€â”€ privacy_policy_screen.dart
â”‚   â”‚       â””â”€â”€ terms_of_service_screen.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/ (34å€‹)              # å†åˆ©ç”¨å¯èƒ½ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ badge_card.dart
â”‚   â”‚   â”œâ”€â”€ favorite_route_card.dart
â”‚   â”‚   â”œâ”€â”€ photo_route_card.dart
â”‚   â”‚   â”œâ”€â”€ user_list_item.dart
â”‚   â”‚   â”œâ”€â”€ follow_button.dart
â”‚   â”‚   â”œâ”€â”€ like_button.dart
â”‚   â”‚   â”œâ”€â”€ optimized_image.dart
â”‚   â”‚   â”œâ”€â”€ photo_viewer.dart
â”‚   â”‚   â””â”€â”€ ...                      # ä»–26å€‹
â”‚   â”‚
â”‚   â””â”€â”€ utils/                       # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ badge_unlock_helper.dart
â”‚
â”œâ”€â”€ supabase_migrations/             # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ 001_rename_existing_tables.sql
â”‚   â”œâ”€â”€ 002_create_new_tables.sql
â”‚   â”œâ”€â”€ 003_create_rls_policies.sql
â”‚   â”œâ”€â”€ 004_create_rpc_functions.sql
â”‚   â”œâ”€â”€ 005_insert_initial_data.sql
â”‚   â”œâ”€â”€ 006_phase4_history_functions.sql
â”‚   â”œâ”€â”€ 007_phase5_search_and_social.sql
â”‚   â”œâ”€â”€ 008_phase5_badges_system.sql
â”‚   â””â”€â”€ test_data_phase5.sql
â”‚
â”œâ”€â”€ database_migrations/             # è¿½åŠ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ 001_walks_table_v4.sql       # walks ãƒ†ãƒ¼ãƒ–ãƒ«æœ€çµ‚ç‰ˆ
â”‚   â”œâ”€â”€ 002_pins_table_v1.sql
â”‚   â”œâ”€â”€ 005_walk_photos_table.sql
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .env                             # ç’°å¢ƒå¤‰æ•°ï¼ˆæ©Ÿå¯†æƒ…å ±ï¼‰
â”œâ”€â”€ pubspec.yaml                     # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ README.md                        # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
â””â”€â”€ ã“ã®ä»–28å€‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ         # å®Ÿè£…çŠ¶æ³ãƒ»ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ç­‰

```

---

## ç”»é¢é·ç§»å›³

### ãƒ¡ã‚¤ãƒ³ç”»é¢æ§‹é€ ï¼ˆ4ã‚¿ãƒ–ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MainScreen (4ã‚¿ãƒ–UI)                â”‚
â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Homeâ”‚ Map â”‚Reco â”‚Profile                   â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€Home Tabã€‘- ãƒ›ãƒ¼ãƒ ç”»é¢
  â”œâ”€ ãŠã™ã™ã‚ã‚¨ãƒªã‚¢ï¼ˆã‚«ãƒ«ãƒ¼ã‚»ãƒ«ï¼‰
  â”‚   â””â”€ [ã‚¨ãƒªã‚¢ã‚’æ¢ã™] â†’ AreaListScreen âŒ ã‚¨ãƒ©ãƒ¼ä¸­
  â”œâ”€ äººæ°—ã®å…¬å¼ãƒ«ãƒ¼ãƒˆ
  â””â”€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ4ãƒœã‚¿ãƒ³ï¼‰
      â”œâ”€ ã‚¨ãƒªã‚¢æ¤œç´¢ â†’ AreaListScreen âŒ
      â”œâ”€ ãƒ«ãƒ¼ãƒˆæ¤œç´¢ â†’ RouteSearchScreen
      â”œâ”€ æ—¥å¸¸æ•£æ­© â†’ DailyWalkView
      â””â”€ æ•£æ­©è¨˜éŒ² â†’ WalkHistoryScreen

ã€Map Tabã€‘- ãƒãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼
  â””â”€ ç¾åœ¨åœ°ä¸­å¿ƒã®ãƒãƒƒãƒ—è¡¨ç¤º âš ï¸ ã‚¿ã‚¤ãƒ«è¡¨ç¤ºå•é¡Œ

ã€Records Tabã€‘- è¨˜éŒ²ã‚¿ãƒ–
  â”œâ”€ çµ±è¨ˆã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰
  â”‚   â”œâ”€ ç·è·é›¢
  â”‚   â”œâ”€ ç·æ™‚é–“
  â”‚   â””â”€ ãƒ¬ãƒ™ãƒ«é€²æ—
  â”œâ”€ æ•£æ­©å±¥æ­´ä¸€è¦§
  â”‚   â”œâ”€ Dailyæ•£æ­©
  â”‚   â””â”€ Outingæ•£æ­©
  â””â”€ [ãŠæ°—ã«å…¥ã‚Š] â†’ FavoritesScreen âœ…

ã€Profile Tabã€‘- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¿ãƒ–
  â”œâ”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤º
  â”œâ”€ çµ±è¨ˆæƒ…å ±
  â”‚   â””â”€ [çµ±è¨ˆè©³ç´°] â†’ StatisticsDashboardScreen âœ…
  â”œâ”€ ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼/ãƒ•ã‚©ãƒ­ãƒ¼
  â”‚   â”œâ”€ [ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼] â†’ FollowersScreen
  â”‚   â””â”€ [ãƒ•ã‚©ãƒ­ãƒ¼ä¸­] â†’ FollowingScreen
  â”œâ”€ ãƒãƒƒã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
  â””â”€ è¨­å®š
```

### æ•£æ­©ãƒ•ãƒ­ãƒ¼

```
ã€æ—¥å¸¸æ•£æ­©ï¼ˆDailyï¼‰ã€‘
1. HomeTab or QuickAction
    â†“ [æ—¥å¸¸æ•£æ­©é–‹å§‹]
2. DailyWalkView
    â”œâ”€ çŠ¬é¸æŠï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    â””â”€ [æ•£æ­©é–‹å§‹] â†’ DailyWalkingScreen âœ…
3. DailyWalkingScreenï¼ˆæ•£æ­©ä¸­ï¼‰
    â”œâ”€ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ GPSè¿½è·¡
    â”œâ”€ åœ°å›³è¡¨ç¤º
    â”œâ”€ çµ±è¨ˆè¡¨ç¤ºï¼ˆè·é›¢/æ™‚é–“/ãƒã‚¤ãƒ³ãƒˆæ•°ï¼‰
    â”œâ”€ [ğŸ“· ã‚«ãƒ¡ãƒ©] âš ï¸ Phase 3å®Ÿè£…ä¸­
    â”œâ”€ [ä¸€æ™‚åœæ­¢/å†é–‹]
    â””â”€ [çµ‚äº†] â†’ ä¿å­˜ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
4. ä¿å­˜å®Œäº† â†’ Records Tab

ã€ãŠã§ã‹ã‘æ•£æ­©ï¼ˆOutingï¼‰ã€‘
1. HomeTab â†’ [ã‚¨ãƒªã‚¢ã‚’æ¢ã™]
    â†“
2. AreaListScreenï¼ˆã‚¨ãƒªã‚¢ä¸€è¦§ï¼‰âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿä¸­
    â””â”€ ç®±æ ¹/æ¨ªæµœ/éŒå€‰ã‚’é¸æŠ
        â†“
3. RouteListScreenï¼ˆãƒ«ãƒ¼ãƒˆä¸€è¦§ï¼‰
    â””â”€ ãƒ«ãƒ¼ãƒˆé¸æŠ â†’ RouteDetailScreen âœ…
4. RouteDetailScreenï¼ˆãƒ«ãƒ¼ãƒˆè©³ç´°ï¼‰
    â”œâ”€ ãƒ«ãƒ¼ãƒˆæƒ…å ±è¡¨ç¤º
    â”œâ”€ æ—¢å­˜ãƒ”ãƒ³è¡¨ç¤º
    â”œâ”€ [ãŠæ°—ã«å…¥ã‚Šç™»éŒ²/è§£é™¤]
    â””â”€ [ã“ã®ãƒ«ãƒ¼ãƒˆã‚’æ­©ã] â†’ WalkingScreen âœ…
5. WalkingScreenï¼ˆæ•£æ­©ä¸­ï¼‰
    â”œâ”€ å…¬å¼ãƒ«ãƒ¼ãƒˆé‡ç•³è¡¨ç¤º
    â”œâ”€ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ GPSè¿½è·¡
    â”œâ”€ [ğŸ“ ãƒ”ãƒ³æŠ•ç¨¿] â†’ PinCreateScreen
    â”œâ”€ [ä¸€æ™‚åœæ­¢/å†é–‹]
    â””â”€ [çµ‚äº†] â†’ ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•æ›´æ–°
6. å®Œäº† â†’ Records Tab
```

### ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ•ãƒ­ãƒ¼

```
ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ã€‘
Profile Tab â†’ [ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢]
    â†“
UserSearchScreen
    â”œâ”€ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
    â””â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ â†’ UserProfileScreen
        â”œâ”€ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤º
        â”œâ”€ [ãƒ•ã‚©ãƒ­ãƒ¼/ã‚¢ãƒ³ãƒ•ã‚©ãƒ­ãƒ¼]
        â”œâ”€ çµ±è¨ˆæƒ…å ±
        â””â”€ æœ€è¿‘ã®æ•£æ­©å±¥æ­´

ã€ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã€‘
Home Tab â†’ [ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³]
    â†“
TimelineScreen
    â””â”€ ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®
        ãƒ”ãƒ³æŠ•ç¨¿ã‚’æ™‚ç³»åˆ—è¡¨ç¤º

ã€é€šçŸ¥ã€‘
å…¨ç”»é¢ â†’ é€šçŸ¥ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆãƒ™ãƒ«ãƒãƒ¼ã‚¯ï¼‰
    â†“
NotificationCenterScreen
    â”œâ”€ æ–°ã—ã„ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼
    â”œâ”€ ãƒ”ãƒ³ã¸ã®ã„ã„ã­
    â”œâ”€ ãƒãƒƒã‚¸ç²å¾—
    â””â”€ ã‚¿ãƒƒãƒ—ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
```

---

## å®Ÿè£…çŠ¶æ³ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

### Phaseåˆ¥å®Ÿè£…çŠ¶æ³

| Phase | å†…å®¹ | çŠ¶æ…‹ | å®Œäº†ç‡ |
|-------|------|------|--------|
| Phase 1 | åŸºæœ¬æ©Ÿèƒ½ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | âœ… å®Œäº† | 100% |
| Phase 2 | ãƒ”ãƒ³æŠ•ç¨¿æ©Ÿèƒ½ | âœ… å®Œäº† | 100% |
| **Phase 3** | **å®Œæˆãƒ»å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰** | **ğŸ”„ å®Ÿè£…ä¸­** | **50%** |
| Phase 4 | æ•£æ­©å±¥æ­´ãƒ»ãƒ›ãƒ¼ãƒ ç”»é¢ | âœ… å®Œäº† | 100% |
| Phase 5 | ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ»ãƒãƒƒã‚¸ | âœ… å®Œäº† | 100% |

### Phase 3 è©³ç´°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

| é …ç›® | çŠ¶æ…‹ | å‚™è€ƒ |
|-----|------|------|
| GPSçµ±è¨ˆè¨ˆç®—ï¼ˆè·é›¢ãƒ»æ™‚é–“ï¼‰ | âœ… å®Œäº† | `gps_service.dart` ã«å®Ÿè£…æ¸ˆã¿ |
| ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•æ›´æ–° | âœ… å®Œäº† | æ•£æ­©çµ‚äº†æ™‚ã«è‡ªå‹•æ›´æ–° |
| **å†™çœŸã®Storageã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰** | **ğŸ”„ å®Ÿè£…ä¸­** | **é€²è¡Œä¸­** |
| â”” PhotoServiceå®Ÿè£… | âœ… å®Œäº† | `photo_service.dart` å­˜åœ¨ |
| â”” ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³è¿½åŠ  | âœ… å®Œäº† | `daily_walking_screen.dart` ã«è¿½åŠ  |
| â”” å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç† | âŒ æœªå®Œäº† | **ãƒã‚±ãƒƒãƒˆåä¿®æ­£å¿…è¦** |
| â”” Storageãƒã‚±ãƒƒãƒˆè¨­å®š | âš ï¸ ä¸€éƒ¨ | `walk-photos` æœªä½œæˆ |
| å‹•ä½œç¢ºèªã¨ãƒ†ã‚¹ãƒˆ | âŒ æœªå®Œäº† | **Phase 3å®Œäº†å¾Œå®Ÿæ–½** |

### æ©Ÿèƒ½åˆ¥å®Ÿè£…çŠ¶æ³

#### âœ… å®Œå…¨å®Ÿè£…æ¸ˆã¿

| ã‚«ãƒ†ã‚´ãƒª | æ©Ÿèƒ½ | å‚™è€ƒ |
|---------|-----|------|
| èªè¨¼ | ãƒ­ã‚°ã‚¤ãƒ³/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ— | email/password |
| èªè¨¼ | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ | Supabase Auth |
| èªè¨¼ | ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆ3ã¤ | test1/2/3@example.com |
| UI | 4ã‚¿ãƒ–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | Home/Map/Records/Profile |
| UI | ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ | å®Œå…¨å¯¾å¿œ |
| GPS | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¿½è·¡ | Geolocatorä½¿ç”¨ |
| GPS | è·é›¢è¨ˆç®— | RouteModel.calculateDistance() |
| GPS | æ™‚é–“è¨ˆç®— | durationè‡ªå‹•è¨ˆç®— |
| åœ°å›³ | Flutter Mapè¡¨ç¤º | âœ… |
| çµ±è¨ˆ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ« | 10kmã§1ãƒ¬ãƒ™ãƒ« |
| çµ±è¨ˆ | ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ  | 17ç¨®é¡å®Ÿè£… |
| ã‚½ãƒ¼ã‚·ãƒ£ãƒ« | ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½ | RPCé–¢æ•°å®Ÿè£… |
| ã‚½ãƒ¼ã‚·ãƒ£ãƒ« | é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  | Realtimeå¯¾å¿œ |
| æ¤œç´¢ | ãƒ«ãƒ¼ãƒˆæ¤œç´¢ | 8ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| ãŠæ°—ã«å…¥ã‚Š | ãƒ«ãƒ¼ãƒˆ/ãƒ”ãƒ³ | å®Œå…¨å®Ÿè£… |

#### âš ï¸ ä¸€éƒ¨å®Ÿè£…ãƒ»å•é¡Œã‚ã‚Š

| ã‚«ãƒ†ã‚´ãƒª | æ©Ÿèƒ½ | å•é¡Œ | å¯¾å¿œçŠ¶æ³ |
|---------|-----|------|---------|
| åœ°å›³ã‚¿ã‚¤ãƒ« | Thunderforestè¡¨ç¤º | APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼ | âš ï¸ ç¢ºèªä¸­ |
| ã‚¨ãƒªã‚¢ä¸€è¦§ | AreaListScreen | GEOGRAPHYå‹ã‚¨ãƒ©ãƒ¼ | âŒ **ä¿ç•™ä¸­** |
| ãƒ›ãƒ¼ãƒ ç”»é¢ | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¸å¯ | ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå•é¡Œ | âŒ **ä¿ç•™ä¸­** |
| å†™çœŸ | ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ | ãƒã‚±ãƒƒãƒˆåä¸ä¸€è‡´ | ğŸ”„ **Phase 3å¯¾å¿œä¸­** |

#### âŒ æœªå®Ÿè£…

| ã‚«ãƒ†ã‚´ãƒª | æ©Ÿèƒ½ | å„ªå…ˆåº¦ | å‚™è€ƒ |
|---------|-----|--------|------|
| ãƒ”ãƒ³ | å†™çœŸè¡¨ç¤º | ä¸­ | ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚‹ |
| ãƒ”ãƒ³ | ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ | ä½ | Phase 6äºˆå®š |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« | ç·¨é›†æ©Ÿèƒ½ | ä¸­ | UIæœªå®Ÿè£… |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« | ã‚¢ãƒã‚¿ãƒ¼å¤‰æ›´ | ä¸­ | UIæœªå®Ÿè£… |
| çŠ¬æƒ…å ± | ç™»éŒ²ãƒ»ç·¨é›† | ä¸­ | ãƒ†ãƒ¼ãƒ–ãƒ«æœªä½œæˆ |
| æ•£æ­©å±¥æ­´ | è©³ç´°è¡¨ç¤º | ä½ | ä¸€è¦§ã®ã¿ |
| é€šçŸ¥ | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ | ä½ | ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ |

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«å®Ÿè£…çŠ¶æ³

#### âœ… å®Ÿè£…æ¸ˆã¿ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆSupabaseï¼‰

| ãƒ†ãƒ¼ãƒ–ãƒ«å | ç”¨é€” | RLS | ãƒ¬ã‚³ãƒ¼ãƒ‰æ•° |
|-----------|------|-----|----------|
| `users` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± | âœ… | - |
| `areas` | ã‚¨ãƒªã‚¢ãƒã‚¹ã‚¿ãƒ¼ | âœ… | 3ä»¶ï¼ˆç®±æ ¹/æ¨ªæµœ/éŒå€‰ï¼‰ |
| `official_routes` | å…¬å¼ãƒ«ãƒ¼ãƒˆ | âœ… | 3ä»¶ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰ |
| `route_pins` | ãƒ”ãƒ³æŠ•ç¨¿ | âœ… | - |
| `route_pin_photos` | ãƒ”ãƒ³å†™çœŸ | âœ… | - |
| `pin_likes` | ã„ã„ã­ | âœ… | - |
| `route_favorites` | ãŠæ°—ã«å…¥ã‚Š | âœ… | - |
| `pin_bookmarks` | ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ | âœ… | - |
| `user_follows` | ãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚ | âœ… | - |
| `notifications` | é€šçŸ¥ | âœ… | - |
| `badge_definitions` | ãƒãƒƒã‚¸ãƒã‚¹ã‚¿ãƒ¼ | âœ… | 17ä»¶ |
| `user_badges` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒã‚¸ | âœ… | - |

#### âŒ æœªä½œæˆãƒ†ãƒ¼ãƒ–ãƒ«

| ãƒ†ãƒ¼ãƒ–ãƒ«å | ç”¨é€” | å„ªå…ˆåº¦ | Phase |
|-----------|------|--------|-------|
| `walks` | æ•£æ­©å±¥æ­´ | **é«˜** | Phase 3 |
| `walk_points` | GPSçµŒè·¯ãƒã‚¤ãƒ³ãƒˆ | **é«˜** | Phase 3 |
| `walk_photos` | æ•£æ­©å†™çœŸ | **é«˜** | **Phase 3** |
| `dogs` | çŠ¬æƒ…å ± | ä¸­ | Phase 6 |
| `user_profiles` | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ‹¡å¼µ | ä¸­ | Phase 6 |
| `comments` | ã‚³ãƒ¡ãƒ³ãƒˆ | ä½ | Phase 7 |

### Supabase RPCé–¢æ•°å®Ÿè£…çŠ¶æ³

#### âœ… å®Ÿè£…æ¸ˆã¿RPCé–¢æ•°

| é–¢æ•°å | ç”¨é€” | çŠ¶æ…‹ |
|-------|------|------|
| `get_user_walk_statistics` | ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆå–å¾— | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `check_and_unlock_badges` | ãƒãƒƒã‚¸è§£é™¤ãƒã‚§ãƒƒã‚¯ | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `search_routes` | ãƒ«ãƒ¼ãƒˆæ¤œç´¢ | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `get_favorite_routes` | ãŠæ°—ã«å…¥ã‚Šãƒ«ãƒ¼ãƒˆå–å¾— | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `get_bookmarked_pins` | ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ”ãƒ³å–å¾— | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `get_followers` | ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ä¸€è¦§ | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `get_following` | ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ä¸€è¦§ | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `get_following_timeline` | ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| `get_user_badges` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒã‚¸ä¸€è¦§ | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |
| **`get_areas_simple`** | **ã‚¨ãƒªã‚¢ä¸€è¦§ï¼ˆåº§æ¨™å¤‰æ›ï¼‰** | **âœ… æ–°è¦ä½œæˆï¼ˆã“ã®ã‚¹ãƒ¬ãƒƒãƒ‰ï¼‰** |

#### âŒ æœªå®Ÿè£…RPCé–¢æ•°

| é–¢æ•°å | ç”¨é€” | å„ªå…ˆåº¦ |
|-------|------|--------|
| `save_walk` | æ•£æ­©ä¿å­˜ | **é«˜** |
| `get_walk_history` | æ•£æ­©å±¥æ­´å–å¾— | **é«˜** |
| `upload_walk_photo` | å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | **é«˜** |

### Supabase Storageãƒã‚±ãƒƒãƒˆ

| ãƒã‚±ãƒƒãƒˆå | ç”¨é€” | Public | çŠ¶æ…‹ |
|-----------|------|--------|------|
| `profile-avatars` | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ | âœ… Yes | âœ… å­˜åœ¨ |
| `dog-photos` | çŠ¬ã®å†™çœŸ | âœ… Yes | âœ… å­˜åœ¨ |
| `pin_photos` | ãƒ”ãƒ³å†™çœŸ | âœ… Yes | âœ… å­˜åœ¨ |
| **`walk-photos`** | **æ•£æ­©å†™çœŸ** | **âœ… Yes** | **âŒ æœªä½œæˆï¼ˆPhase 3ã§ä½œæˆäºˆå®šï¼‰** |

---

## å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ãƒ»APIæƒ…å ±

### ğŸ” Supabaseï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰

| é …ç›® | å€¤ |
|-----|---|
| **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURL** | `https://jkpenklhrlbctebkpvax.supabase.co` |
| **Anon Key** | `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImprcGVua2xocmxiY3RlYmtwdmF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MjcwMDUsImV4cCI6MjA3ODUwMzAwNX0.7Blk7ZgGMBN1orsovHgaTON7IDVDJ0Er_QGru8ZMZz8` |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | PostgreSQL + PostGIS |
| èªè¨¼ | Supabase Auth |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | Supabase Storage |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | Supabase Realtimeï¼ˆé€šçŸ¥ç”¨ï¼‰ |

**æ¥ç¶šç¢ºèªæ–¹æ³•:**
```dart
import 'package:supabase_flutter/supabase_flutter.dart';

await Supabase.initialize(
  url: 'https://jkpenklhrlbctebkpvax.supabase.co',
  anonKey: 'eyJhbGciOiJIUzI1NiIs...',
);
```

### ğŸ—ºï¸ Thunderforest Maps APIï¼ˆåœ°å›³ã‚¿ã‚¤ãƒ«ï¼‰

| é …ç›® | å€¤ |
|-----|---|
| **APIã‚­ãƒ¼** | `8c3872c0b1d54471a5e0c685ce76e6ff` |
| ãƒ—ãƒ©ãƒ³ | Free Tier |
| ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¸Šé™ | 150,000å›/æœˆ |
| ä½¿ç”¨ã‚¿ã‚¤ãƒ« | Outdoors |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | https://www.thunderforest.com/ |

**ä½¿ç”¨ä¾‹:**
```dart
TileLayer(
  urlTemplate: 'https://tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey=${Environment.thunderforestApiKey}',
  userAgentPackageName: 'com.doghub.wanmap',
)
```

**âš ï¸ æ³¨æ„äº‹é …:**
- éå»ã«æœŸé™åˆ‡ã‚Œã‚­ãƒ¼ `8c3872c6b1d5471a0e8c88cc69ed4f` ã‚’ä½¿ç”¨ã—ã¦ã„ãŸå•é¡Œã‚ã‚Š
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«æ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªå¿…è¦

### ğŸ“± GitHubï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼‰

| é …ç›® | å€¤ |
|-----|---|
| **ãƒªãƒã‚¸ãƒˆãƒª** | `https://github.com/AtsushiNarisawa/wanmap_v2` |
| ãƒ–ãƒ©ãƒ³ãƒ | `main` |
| ã‚ªãƒ¼ãƒŠãƒ¼ | AtsushiNarisawa |

**Gitæ“ä½œæ™‚ã®æ³¨æ„:**
- ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒï¼ˆ`/home/user/webapp/wanmap_v2`ï¼‰ã§é–‹ç™º
- ãƒ­ãƒ¼ã‚«ãƒ«Macï¼ˆ`/Users/atsushinarisawa/projects/webapp/wanmap_v2`ï¼‰ã§ãƒ†ã‚¹ãƒˆ
- ä¿®æ­£å¾Œã¯å¿…ãš `git push` â†’ `git pull` ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«åæ˜ 

### ğŸ§ª ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

| Email | Password | User ID |
|-------|----------|---------|
| `test1@example.com` | `test123` | `9697d7af-a10b-493f-9ecf-1f31ed6029f2` |
| `test2@example.com` | `test123` | - |
| `test3@example.com` | `test123` | - |

---

## é–‹ç™ºãƒ«ãƒ¼ãƒ«ã¨åŸå‰‡

### ğŸ¯ é–‹ç™ºç’°å¢ƒã®ç†è§£

#### ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ vs ãƒ­ãƒ¼ã‚«ãƒ«Mac

**ã€é‡è¦ã€‘ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯2ã¤ã®ç’°å¢ƒã§å‹•ä½œ:**

1. **ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒï¼ˆAIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼‰**
   - ãƒ‘ã‚¹: `/home/user/webapp/wanmap_v2`
   - ç”¨é€”: ã‚³ãƒ¼ãƒ‰ç·¨é›†ã€Gitæ“ä½œã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
   - å½¹å‰²: é–‹ç™ºä½œæ¥­

2. **ãƒ­ãƒ¼ã‚«ãƒ«Macï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**
   - ãƒ‘ã‚¹: `/Users/atsushinarisawa/projects/webapp/wanmap_v2`
   - ç”¨é€”: Flutterå®Ÿè¡Œã€iOSã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆ
   - å½¹å‰²: å‹•ä½œç¢ºèª

**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼:**
```
1. ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã§ã‚³ãƒ¼ãƒ‰ä¿®æ­£
     â†“
2. git commit & git push
     â†“
3. Macã§ git pull
     â†“
4. Mac ã§ flutter run
     â†“
5. iOSã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å‹•ä½œç¢ºèª
```

**âš ï¸ çµ¶å¯¾ã«å¿˜ã‚Œãªã„ã“ã¨:**
- ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã§ä¿®æ­£ â†’ **å¿…ãš git push**
- Macã§ãƒ†ã‚¹ãƒˆå‰ â†’ **å¿…ãš git pull**
- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆ`R`ï¼‰ã ã‘ã§ã¯ä¸ååˆ†ãªå ´åˆ â†’ `flutter run` ã§å®Œå…¨å†èµ·å‹•

### ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«

1. **æ©Ÿå¯†æƒ…å ±ã¯ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰**
   - Supabase URL/Key
   - Thunderforest API Key
   - `.gitignore` ã« `.env` ã‚’è¿½åŠ æ¸ˆã¿

2. **Git ã«å«ã‚ãªã„:**
   - `.env`
   - `ios/Pods/`
   - `.dart_tool/`
   - `build/`

3. **RLSï¼ˆRow Level Securityï¼‰å¿…é ˆ:**
   - å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«RLSãƒãƒªã‚·ãƒ¼è¨­å®š
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¯æœ¬äººã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

### ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

#### çŠ¶æ…‹ç®¡ç†: Riverpod 2.6.1

**å¿…é ˆãƒ«ãƒ¼ãƒ«:**
1. **Provider ã§ã¯ãªã Riverpod ã‚’ä½¿ç”¨**
2. **å…¨ã¦ã® Provider ã¯ `riverpod` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨**
3. **`ConsumerWidget` ã¾ãŸã¯ `ConsumerStatefulWidget` ã‚’ç¶™æ‰¿**

**ä¾‹:**
```dart
// âœ… æ­£ã—ã„
import 'package:flutter_riverpod/flutter_riverpod.dart';

final myProvider = StateNotifierProvider<MyNotifier, MyState>((ref) {
  return MyNotifier();
});

class MyScreen extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final state = ref.watch(myProvider);
    // ...
  }
}

// âŒ é–“é•ã„ï¼ˆProvider ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä½¿ã‚ãªã„ï¼‰
import 'package:provider/provider.dart';
```

#### ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³: `*_screen.dart`
- ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼: `*_provider.dart`
- ã‚µãƒ¼ãƒ“ã‚¹: `*_service.dart`
- ãƒ¢ãƒ‡ãƒ«: `*_model.dart` ã¾ãŸã¯ `*.dart`
- ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ: `*_widget.dart` ã¾ãŸã¯ `*.dart`

#### Importé †åº

```dart
// 1. Dartãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
import 'dart:async';

// 2. Flutterãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
import 'package:flutter/material.dart';

// 3. ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:supabase_flutter/supabase_flutter.dart';

// 4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ•ã‚¡ã‚¤ãƒ«
import '../../config/wanmap_colors.dart';
import '../../models/area.dart';
```

### ğŸ—ºï¸ åœ°å›³é–¢é€£ã®æ³¨æ„ç‚¹

1. **GEOGRAPHYå‹ã®æ‰±ã„:**
   - Supabaseã‹ã‚‰è¿”ã•ã‚Œã‚‹GEOGRAPHYå‹ã¯ãƒã‚¤ãƒŠãƒª
   - RPCé–¢æ•°ã§ `ST_X()`, `ST_Y()` ã‚’ä½¿ã£ã¦æ•°å€¤ã«å¤‰æ›
   - ã¾ãŸã¯ `ST_AsText()` ã§WKTå½¢å¼ã«å¤‰æ›

2. **åº§æ¨™ã®é †åº:**
   - PostGIS: (longitude, latitude)
   - Flutter LatLng: (latitude, longitude)
   - **å¿…ãšé †åºã‚’ç¢ºèªï¼**

### ğŸ”„ Gité‹ç”¨ãƒ«ãƒ¼ãƒ«

1. **ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥:**
   - ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒ: `main`
   - åŸºæœ¬çš„ã« `main` ã«ç›´æ¥ã‚³ãƒŸãƒƒãƒˆ
   - å¤§ããªæ©Ÿèƒ½è¿½åŠ æ™‚ã®ã¿ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒä½œæˆ

2. **ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**
   ```
   Add: æ–°æ©Ÿèƒ½è¿½åŠ 
   Fix: ãƒã‚°ä¿®æ­£
   Update: æ—¢å­˜æ©Ÿèƒ½ã®æ›´æ–°
   Refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
   Docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
   ```

3. **ã‚³ãƒŸãƒƒãƒˆé »åº¦:**
   - æ©Ÿèƒ½å˜ä½ã§å°ã¾ã‚ã«ã‚³ãƒŸãƒƒãƒˆ
   - å‹•ä½œç¢ºèªå¾Œã«ã‚³ãƒŸãƒƒãƒˆæ¨å¥¨

### ğŸ§ª ãƒ†ã‚¹ãƒˆæ‰‹é †

1. **æ–°æ©Ÿèƒ½å®Ÿè£…å¾Œ:**
   ```bash
   # ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹
   git add .
   git commit -m "Add: æ–°æ©Ÿèƒ½"
   git push origin main
   
   # Mac
   git pull origin main
   flutter run
   ```

2. **å‹•ä½œç¢ºèªé …ç›®:**
   - [ ] ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã‹
   - [ ] å¯¾è±¡ç”»é¢ã«é·ç§»ã§ãã‚‹ã‹
   - [ ] ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
   - [ ] ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ã‹
   - [ ] ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã§ãã‚‹ã‹

3. **ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚:**
   - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®å…¨å‡ºåŠ›ã‚’ã‚³ãƒ”ãƒ¼
   - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ’®å½±
   - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ­£ç¢ºã«è¨˜éŒ²

### ğŸ“± iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ä½¿ç”¨æ™‚ã®æ³¨æ„

1. **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã®ç¢ºèª:**
   - `print()` æ–‡ã§ãƒ­ã‚°å‡ºåŠ›
   - çµµæ–‡å­—ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹æ¨å¥¨: `ğŸ”µ`, `âœ…`, `âŒ`, `âš ï¸`

2. **ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ vs ãƒ•ãƒ«ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ:**
   - `r`: ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆUIå¤‰æ›´ã®ã¿ï¼‰
   - `R`: ãƒ›ãƒƒãƒˆãƒªã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆState ãƒªã‚»ãƒƒãƒˆï¼‰
   - `q` â†’ `flutter run`: å®Œå…¨å†èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰

3. **Providerã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œ:**
   - `FutureProvider` ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹
   - `autoDispose` ã‚’ä½¿ç”¨ã—ã¦è‡ªå‹•ç ´æ£„
   - ã¾ãŸã¯ `ref.invalidate()` ã§æ˜ç¤ºçš„ã«ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥

---

## æ—¢çŸ¥ã®å•é¡Œã¨è§£æ±ºç­–

### ğŸš¨ ç¾åœ¨é€²è¡Œä¸­ã®å•é¡Œ

#### å•é¡Œ1: ã‚¨ãƒªã‚¢ä¸€è¦§ç”»é¢ã§ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:**
```
ã€Œã‚¨ãƒªã‚¢ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€
Exception: Failed to fetch areas: type 'Null' is not a subtype of type 'num' in type cast
```

**ç™ºç”Ÿå ´æ‰€:**
- `AreaListScreen` (`lib/screens/outing/area_list_screen.dart`)
- ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã€Œã‚¨ãƒªã‚¢ã‚’æ¢ã™ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—æ™‚

**åŸå› ï¼ˆæ¨å®šï¼‰:**
- GEOGRAPHYå‹ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãè§£æã§ãã¦ã„ãªã„
- `get_areas_simple()` RPCé–¢æ•°ã‚’ä½œæˆã—ãŸãŒã€ã¾ã ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹
- Providerã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œã®å¯èƒ½æ€§

**è©¦è¡Œã—ãŸå¯¾ç­–:**
1. âœ… `Area.fromJson` ã‚’å®‰å…¨ãªå‹ã‚­ãƒ£ã‚¹ãƒˆã«ä¿®æ­£
2. âœ… `get_areas_simple()` RPCé–¢æ•°ã‚’ä½œæˆï¼ˆlatitude/longitudeã«å¤‰æ›ï¼‰
3. âœ… `area_provider.dart` ã‚’ `FutureProvider.autoDispose` ã«å¤‰æ›´
4. âœ… å†è©¦è¡Œãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
5. âŒ ã¾ã ã‚¨ãƒ©ãƒ¼ãŒè§£æ¶ˆã•ã‚Œãš

**ç¾åœ¨ã®çŠ¶æ…‹:**
- **ä¿ç•™ä¸­**ï¼ˆPhase 3å®Œäº†å¾Œã«å†åº¦å–ã‚Šçµ„ã‚€ï¼‰

**æ¬¡ã®å¯¾ç­–æ¡ˆ:**
1. Supabaseã§ç›´æ¥ã‚¯ã‚¨ãƒªå®Ÿè¡Œã—ã¦è¿”ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚’ç¢ºèª
2. `area_provider.dart` ã®ãƒ­ã‚°ã‚’å¼·åŒ–
3. å®Œå…¨ã«ã‚¢ãƒ—ãƒªã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

---

#### å•é¡Œ2: ãƒ›ãƒ¼ãƒ ç”»é¢ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ããªã„

**ç—‡çŠ¶:**
- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ4ãƒœã‚¿ãƒ³ï¼‰ã®ä¸‹ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚‹ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ããªã„

**ç™ºç”Ÿå ´æ‰€:**
- `HomeTab` (`lib/screens/main/tabs/home_tab.dart`)

**åŸå› :**
- `areasAsync` ãŒã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã§ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå´©ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§
- `SingleChildScrollView` ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŒæ©Ÿèƒ½ã—ã¦ã„ãªã„

**è©¦è¡Œã—ãŸå¯¾ç­–:**
1. âœ… ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆé †åºã‚’å¤‰æ›´ï¼ˆã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ€åˆã«ï¼‰
2. âŒ ã¾ã ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ããš

**ç¾åœ¨ã®çŠ¶æ…‹:**
- **ä¿ç•™ä¸­**

---

#### å•é¡Œ3: åœ°å›³ã‚¿ã‚¤ãƒ«ï¼ˆThunderforestï¼‰ãŒè¡¨ç¤ºã•ã‚Œãªã„

**ç—‡çŠ¶:**
- ãƒãƒƒãƒ—ã‚¿ãƒ–ã§åœ°å›³ã‚¿ã‚¤ãƒ«ãŒè¡¨ç¤ºã•ã‚Œãªã„
- ã¾ãŸã¯å¤ã„APIã‚­ãƒ¼ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹

**åŸå› :**
- éå»ã«æœŸé™åˆ‡ã‚Œã‚­ãƒ¼ `8c3872c6b1d5471a0e8c88cc69ed4f` ã‚’ä½¿ç”¨
- æ–°ã—ã„ã‚­ãƒ¼ `8c3872c0b1d54471a5e0c685ce76e6ff` ã«æ›´æ–°æ¸ˆã¿
- ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã„ã‚‹å¯èƒ½æ€§

**å¯¾ç­–:**
1. âœ… `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã§æ­£ã—ã„ã‚­ãƒ¼ã«æ›´æ–°
2. âœ… `daily_walking_screen.dart` ã§ `Environment.thunderforestApiKey` ã‚’ä½¿ç”¨
3. âš ï¸ ä»–ã®ç”»é¢ã§ã‚‚åŒæ§˜ã«ä¿®æ­£å¿…è¦ã‹ç¢ºèª

**ç¢ºèªæ–¹æ³•:**
```bash
# API ã‚­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
curl "https://tile.thunderforest.com/outdoors/1/0/0.png?apikey=8c3872c0b1d54471a5e0c685ce76e6ff"
```

---

### ğŸ“ éå»ã«è§£æ±ºã—ãŸå•é¡Œ

#### è§£æ±ºæ¸ˆã¿1: Riverpodç§»è¡Œ

**å•é¡Œ:** Provider ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ Riverpod ã¸ã®ç§»è¡Œ
**è§£æ±º:** å…¨22å€‹ã®Providerã‚’Riverpodã«å®Œå…¨ç§»è¡Œå®Œäº†
**æ—¥ä»˜:** 2025-11-22

#### è§£æ±ºæ¸ˆã¿2: GPSçµ±è¨ˆè¨ˆç®—

**å•é¡Œ:** è·é›¢ãƒ»æ™‚é–“ã®è¨ˆç®—ãŒæœªå®Ÿè£…
**è§£æ±º:** `gps_service.dart` ã«å®Ÿè£…å®Œäº†
**æ—¥ä»˜:** Phase 3

#### è§£æ±ºæ¸ˆã¿3: ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 

**å•é¡Œ:** ãƒãƒƒã‚¸å®šç¾©ã¨RPCé–¢æ•°ãŒæœªå®Ÿè£…
**è§£æ±º:** 17ç¨®é¡ã®ãƒãƒƒã‚¸ã¨ `check_and_unlock_badges` RPCå®Ÿè£…å®Œäº†
**æ—¥ä»˜:** Phase 5

---

## ä»Šå¾Œã®ã‚¿ã‚¹ã‚¯

### ğŸ¯ Phase 3 å®Œäº†ã‚¿ã‚¹ã‚¯ï¼ˆå„ªå…ˆåº¦: æœ€é«˜ï¼‰

#### 1. å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã®å®Œæˆ

**æ®‹ã‚¿ã‚¹ã‚¯:**
- [ ] `walk-photos` Storageãƒã‚±ãƒƒãƒˆã‚’ä½œæˆ
- [ ] `PhotoService` ã®ãƒã‚±ãƒƒãƒˆåã‚’ä¿®æ­£ï¼ˆ`route-photos` â†’ `walk-photos`ï¼‰
- [ ] `daily_walking_screen.dart` ã®ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã« `PhotoService` ã‚’çµ±åˆ
- [ ] å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã‚’å®Ÿè£…
- [ ] ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æˆåŠŸ/å¤±æ•—ã®UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

**å®Ÿè£…æ‰‹é †:**
```sql
-- 1. Supabaseã§ãƒã‚±ãƒƒãƒˆä½œæˆ
INSERT INTO storage.buckets (id, name, public)
VALUES ('walk-photos', 'walk-photos', true);

-- 2. RLSãƒãƒªã‚·ãƒ¼è¨­å®š
CREATE POLICY "Authenticated users can upload walk photos"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (bucket_id = 'walk-photos');

CREATE POLICY "Public can view walk photos"
ON storage.objects FOR SELECT
TO public
USING (bucket_id = 'walk-photos');
```

```dart
// 3. PhotoServiceä¿®æ­£
// lib/services/photo_service.dart ã®58è¡Œç›®
await _supabase.storage
    .from('walk-photos')  // å¤‰æ›´
    .upload(filePath, file);
```

```dart
// 4. ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã®å®Ÿè£…
// lib/screens/daily/daily_walking_screen.dart
onPressed: () async {
  final photoService = PhotoService();
  final file = await photoService.takePhoto();
  if (file != null) {
    final userId = Supabase.instance.client.auth.currentUser?.id;
    final routeId = 'walk_${DateTime.now().millisecondsSinceEpoch}';
    final path = await photoService.uploadPhoto(
      file: file,
      routeId: routeId,
      userId: userId!,
    );
    if (path != null) {
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text('å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ')),
      );
    }
  }
},
```

#### 2. Phase 3 å‹•ä½œç¢ºèªã¨ãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆé …ç›®:**
- [ ] æ—¥å¸¸æ•£æ­©ã‚’é–‹å§‹ã§ãã‚‹
- [ ] GPSè¿½è·¡ãŒå‹•ä½œã™ã‚‹
- [ ] è·é›¢ãƒ»æ™‚é–“ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã§å†™çœŸæ’®å½±ã§ãã‚‹
- [ ] å†™çœŸãŒStorageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹
- [ ] æ•£æ­©ã‚’çµ‚äº†ã§ãã‚‹
- [ ] ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒè‡ªå‹•æ›´æ–°ã•ã‚Œã‚‹
- [ ] Records Tabã«å±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### ğŸ”„ ä¿ç•™ä¸­ã®å•é¡Œã®è§£æ±ºï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰

#### ã‚¨ãƒªã‚¢ä¸€è¦§ã‚¨ãƒ©ãƒ¼ã®è§£æ±º

**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**
1. Supabaseã§ç›´æ¥ç¢ºèª:
   ```sql
   SELECT * FROM get_areas_simple();
   ```
2. ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚’ç¢ºèªå¾Œã€`Area.fromJson` ã‚’å†ä¿®æ­£
3. å®Œå…¨ãªã‚¢ãƒ—ãƒªå‰Šé™¤â†’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### ãƒ›ãƒ¼ãƒ ç”»é¢ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œ

**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**
1. ã‚¨ãƒªã‚¢ä¸€è¦§ã‚¨ãƒ©ãƒ¼è§£æ±ºå¾Œã«å†ç¢ºèª
2. `SingleChildScrollView` ã® `physics` ã‚’ç¢ºèª
3. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ‡ãƒãƒƒã‚°

---

### ğŸ“… Phase 6ä»¥é™ã®è¨ˆç”»ï¼ˆå„ªå…ˆåº¦: ä¸­ï¼‰

#### Phase 6: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ‹¡å¼µ

- [ ] ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ç”»é¢å®Ÿè£…
- [ ] ã‚¢ãƒã‚¿ãƒ¼å¤‰æ›´æ©Ÿèƒ½
- [ ] çŠ¬æƒ…å ±ç™»éŒ²ãƒ»ç·¨é›†
- [ ] `dogs` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `user_profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

#### Phase 7: ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½

- [ ] ãƒ”ãƒ³ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆ
- [ ] `comments` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆé€šçŸ¥

#### Phase 8: Androidå¯¾å¿œ

- [ ] Androidå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ
- [ ] Google Play Consoleè¨­å®š
- [ ] APKãƒ“ãƒ«ãƒ‰

#### Phase 9: ãƒªãƒªãƒ¼ã‚¹æº–å‚™

- [ ] App Storeç”³è«‹
- [ ] ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼æœ€çµ‚ç¢ºèª
- [ ] åˆ©ç”¨è¦ç´„æœ€çµ‚ç¢ºèª
- [ ] ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ç´ ææº–å‚™

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆãƒ»é€£çµ¡å…ˆ

**é–‹ç™ºè€…:** æˆæ²¢æ•¦å² (Atsushi Narisawa)  
**GitHub:** https://github.com/AtsushiNarisawa  
**ãƒªãƒã‚¸ãƒˆãƒª:** https://github.com/AtsushiNarisawa/wanmap_v2  
**å•ã„åˆã‚ã›:** GitHub Issues

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `README.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- `CURRENT_STATUS_AND_ROADMAP.md` - å®Ÿè£…çŠ¶æ³ã¨ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
- `PHASE5_TEST_GUIDE.md` - Phase 5ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰
- `APP_NAVIGATION_MAP.md` - ç”»é¢ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è©³ç´°
- `DATABASE_MIGRATION_GUIDE.md` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

---

**æœ€çµ‚æ›´æ–°:** 2025-11-24  
**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆè€…:** AI Assistant  
**ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼:** æˆæ²¢æ•¦å²

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯2åº¦æ¤œè¨¼ã—ã¦ä½œæˆã•ã‚Œã¾ã—ãŸã€‚**
