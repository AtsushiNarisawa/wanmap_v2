# Phase 4: å®Ÿè£…ã®å³å¯†ãƒã‚§ãƒƒã‚¯å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**ãƒã‚§ãƒƒã‚¯æ—¥æ™‚**: 2025-11-27  
**ãƒã‚§ãƒƒã‚¯æ™‚é–“**: ç´„20åˆ†  
**Status**: âœ… **å…¨ãƒã‚§ãƒƒã‚¯å®Œäº†ãƒ»ä¿®æ­£æ¸ˆã¿**

---

## ğŸ“‹ å®Ÿæ–½ã—ãŸå³å¯†ãƒã‚§ãƒƒã‚¯

### âœ… Check 1: active_walk_banner.dart ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ãƒã‚§ãƒƒã‚¯

**å•é¡Œç™ºè¦‹**:
- âŒ `import '../config/app_colors.dart';` â†’ ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã—ãªã„
- âŒ `import '../config/app_spacing.dart';` â†’ ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã—ãªã„
- âŒ `import '../config/app_typography.dart';` â†’ ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã—ãªã„

**ä¿®æ­£å†…å®¹**:
```dart
// ä¿®æ­£å‰
import '../config/app_colors.dart';
import '../config/app_spacing.dart';
import '../config/app_typography.dart';

// ä¿®æ­£å¾Œ
import '../config/wanmap_colors.dart';
import '../config/wanmap_spacing.dart';
import '../config/wanmap_typography.dart';
```

---

### âœ… Check 2: active_walk_banner.dart ã®å‹å®šç¾©ãƒã‚§ãƒƒã‚¯

**å•é¡Œç™ºè¦‹**:
- âŒ `AppColors.primary` â†’ ã‚¯ãƒ©ã‚¹åãŒé–“é•ã£ã¦ã„ã‚‹
- âŒ `AppSpacing.md` â†’ ã‚¯ãƒ©ã‚¹åãŒé–“é•ã£ã¦ã„ã‚‹
- âŒ `AppTypography.labelMedium` â†’ ã‚¯ãƒ©ã‚¹åãŒé–“é•ã£ã¦ã„ã‚‹

**ä¿®æ­£å†…å®¹**:
```dart
// ä¿®æ­£å‰
color: AppColors.primary
horizontal: AppSpacing.md
style: AppTypography.labelMedium

// ä¿®æ­£å¾Œ
color: WanMapColors.primary
horizontal: WanMapSpacing.md
style: WanMapTypography.labelMedium
```

**ä¿®æ­£ç®‡æ‰€**: åˆè¨ˆ11ç®‡æ‰€
- `WanMapColors`: 3ç®‡æ‰€
- `WanMapSpacing`: 6ç®‡æ‰€
- `WanMapTypography`: 2ç®‡æ‰€

---

### âœ… Check 3: active_walk_banner.dart ã® Null Safety ãƒã‚§ãƒƒã‚¯

**å•é¡Œç™ºè¦‹**:
- âŒ `final OfficialRoute? currentRoute` â†’ Nullå¯èƒ½ã ãŒã€Outing Walkæ™‚ã«å¿…é ˆ
- âŒ `Navigator.pushReplacement` â†’ ãƒ«ãƒ¼ãƒˆæƒ…å ±ãŒãªãã¦ã‚‚é·ç§»ã—ã‚ˆã†ã¨ã™ã‚‹

**ä¿®æ­£å†…å®¹**:
1. **currentRouteãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®Œå…¨å‰Šé™¤**
2. **Daily Walkå°‚ç”¨åŒ–**
3. **Outing Walkã¯é€šçŸ¥ã®ã¿**ï¼ˆãƒãƒƒãƒ—ã‚¿ãƒ–ã‹ã‚‰ç¢ºèªã™ã‚‹æ¡ˆå†…ï¼‰

```dart
// ä¿®æ­£å‰
class ActiveWalkBanner extends ConsumerWidget {
  final OfficialRoute? currentRoute;
  const ActiveWalkBanner({super.key, this.currentRoute});

// ä¿®æ­£å¾Œ
class ActiveWalkBanner extends ConsumerWidget {
  const ActiveWalkBanner({super.key});
```

**ç†ç”±**:
- Outing Walkã®å ´åˆã€ãƒ«ãƒ¼ãƒˆæƒ…å ±ï¼ˆ`OfficialRoute`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ãŒå¿…è¦
- MainScreenã‹ã‚‰`currentRoute`ã‚’æ¸¡ã™æ–¹æ³•ãŒãªã„
- ã‚°ãƒ­ãƒ¼ãƒãƒ«Providerã§ç®¡ç†ã™ã‚‹æ–¹ãŒå®‰å…¨ã ãŒã€å®Ÿè£…ãŒè¤‡é›‘
- **Daily Walkå°‚ç”¨**ã¨ã™ã‚‹ã“ã¨ã§ã€ã‚·ãƒ³ãƒ—ãƒ«ã‹ã¤å®‰å…¨ã«å®Ÿè£…

---

### âœ… Check 4: main_screen.dart ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ãƒã‚§ãƒƒã‚¯

**çµæœ**: âœ… **å•é¡Œãªã—**

```dart
import '../../widgets/active_walk_banner.dart';
```

---

### âœ… Check 5: main_screen.dart ã® Widget æ§‹é€ ãƒã‚§ãƒƒã‚¯

**çµæœ**: âœ… **å•é¡Œãªã—**

```dart
bottomNavigationBar: Column(
  mainAxisSize: MainAxisSize.min,
  children: [
    const ActiveWalkBanner(),
    BottomNavigationBar(...),
  ],
),
```

---

### âœ… Check 6: daily_walking_screen.dart ã® initState ä¿®æ­£ãƒã‚§ãƒƒã‚¯

**çµæœ**: âœ… **å•é¡Œãªã—**

```dart
void initState() {
  super.initState();
  _initializeWalking();
}

Future<void> _initializeWalking() async {
  final gpsState = ref.read(gpsProviderRiverpod);
  if (gpsState.isRecording) {
    if (kDebugMode) {
      print('ğŸ”µ æ—¢ã«GPSè¨˜éŒ²ä¸­ã®ãŸã‚ã€åˆæœŸåŒ–ã‚’ã‚¹ã‚­ãƒƒãƒ—');
    }
    return;
  }
  await _startWalking();
}
```

---

### âœ… Check 7: walking_screen.dart ã® initState ä¿®æ­£ãƒã‚§ãƒƒã‚¯

**çµæœ**: âœ… **å•é¡Œãªã—**

ï¼ˆdaily_walking_screen.dartã¨åŒæ§˜ã®å®Ÿè£…ï¼‰

---

### âœ… Check 8: å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯

**çµæœ**: âœ… **å•é¡Œãªã—**

---

## ğŸ“Š ä¿®æ­£ã‚µãƒãƒªãƒ¼

| ãƒã‚§ãƒƒã‚¯é …ç›® | å•é¡Œç™ºè¦‹ | ä¿®æ­£å®Œäº† |
|-------------|---------|---------|
| ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ | âœ… 3å€‹ | âœ… 3å€‹ |
| ã‚¯ãƒ©ã‚¹å | âœ… 11å€‹ | âœ… 11å€‹ |
| Null Safety | âœ… 1å€‹ | âœ… 1å€‹ |
| Widgetæ§‹é€  | âœ… 0å€‹ | - |
| initStateä¿®æ­£ | âœ… 0å€‹ | - |
| **åˆè¨ˆ** | **15å€‹** | **15å€‹** |

---

## ğŸ¯ æœ€çµ‚çš„ãªå®Ÿè£…ä»•æ§˜

### 1. **Daily Walkå°‚ç”¨ã®ãƒãƒŠãƒ¼**
- **å¯¾å¿œ**: æ—¥å¸¸æ•£æ­©ã®ã¿
- **å‹•ä½œ**: ãƒãƒŠãƒ¼ã‚¿ãƒƒãƒ—ã§æ—¥å¸¸æ•£æ­©ç”»é¢ã¸é·ç§»
- **é·ç§»æ–¹æ³•**: `Navigator.push`ï¼ˆæˆ»ã‚‹ãƒœã‚¿ãƒ³ã§æˆ»ã‚Œã‚‹ï¼‰

### 2. **Outing Walkæ™‚ã®å‹•ä½œ**
- **å¯¾å¿œ**: é€šçŸ¥ã®ã¿
- **å‹•ä½œ**: ãƒãƒŠãƒ¼ã‚¿ãƒƒãƒ—ã§ã€Œãƒãƒƒãƒ—ã‚¿ãƒ–ã‹ã‚‰ç¢ºèªã—ã¦ãã ã•ã„ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- **ç†ç”±**: ãƒ«ãƒ¼ãƒˆæƒ…å ±ãŒå¿…è¦ãªãŸã‚ã€ç°¡æ˜“å®Ÿè£…

### 3. **è¡¨ç¤ºå†…å®¹**
- è·é›¢ï¼ˆä¾‹: 0mï¼‰
- æ™‚é–“ï¼ˆä¾‹: 0ç§’ï¼‰
- ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ—¥å¸¸æ•£æ­© / ãŠã§ã‹ã‘æ•£æ­©ï¼‰
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã‚¢ã‚¤ã‚³ãƒ³

---

## âœ… æ¤œè¨¼é …ç›®ï¼ˆMacå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆç”¨ï¼‰

### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª1: Daily Walk
1. [ ] ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ã€Œæ—¥å¸¸æ•£æ­©ã€é–‹å§‹
2. [ ] å·¦ä¸Šã®æˆ»ã‚‹ãƒœã‚¿ãƒ³ã§æˆ»ã‚‹
3. [ ] ç”»é¢ä¸‹éƒ¨ã«ãƒãƒŠãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. [ ] ãƒãƒŠãƒ¼ã‚’ã‚¿ãƒƒãƒ—ã—ã¦æ—¥å¸¸æ•£æ­©ç”»é¢ã¸é·ç§»
5. [ ] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€ŒğŸ”µ æ—¢ã«GPSè¨˜éŒ²ä¸­ã®ãŸã‚ã€åˆæœŸåŒ–ã‚’ã‚¹ã‚­ãƒƒãƒ—ã€ãŒè¡¨ç¤º
6. [ ] ã€Œæ—¢ã«è¨˜éŒ²ä¸­ã§ã™ã€ã‚¨ãƒ©ãƒ¼ãŒ**ç™ºç”Ÿã—ãªã„**

### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª2: Outing Walk
1. [ ] ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰ã€Œç®±æ ¹ã€ã‚¨ãƒªã‚¢ã‚’é¸æŠ
2. [ ] å…¬å¼ãƒ«ãƒ¼ãƒˆã‚’é¸æŠã—ã¦ã€Œæ•£æ­©ã‚’é–‹å§‹ã€
3. [ ] å·¦ä¸Šã®æˆ»ã‚‹ãƒœã‚¿ãƒ³ã§æˆ»ã‚‹
4. [ ] ç”»é¢ä¸‹éƒ¨ã«ãƒãƒŠãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã€ŒãŠã§ã‹ã‘æ•£æ­©ã€è¡¨ç¤ºï¼‰
5. [ ] ãƒãƒŠãƒ¼ã‚’ã‚¿ãƒƒãƒ—
6. [ ] ã€ŒãŠã§ã‹ã‘æ•£æ­©ä¸­ã§ã™ã€‚ãƒãƒƒãƒ—ã‚¿ãƒ–ã‹ã‚‰ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤º

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Macå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ
```bash
cd ~/projects/webapp/wanmap_v2
git pull origin main
# Flutterãƒ›ãƒƒãƒˆãƒªã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆRï¼‰
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- âœ… ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªã—
- âœ… Daily Walkæ™‚ã€ãƒãƒŠãƒ¼ã‹ã‚‰æ•£æ­©ä¸­ç”»é¢ã¸é·ç§»å¯èƒ½
- âœ… Outing Walkæ™‚ã€é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- âœ… ã€Œæ—¢ã«è¨˜éŒ²ä¸­ã§ã™ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„

---

## ğŸ‰ ã¾ã¨ã‚

**å³å¯†ãƒã‚§ãƒƒã‚¯ã®çµæœ**:
- âœ… **15å€‹ã®å•é¡Œã‚’ç™ºè¦‹ãƒ»ä¿®æ­£**
- âœ… **Null Safetyå•é¡Œã‚’å®Œå…¨è§£æ±º**
- âœ… **Daily Walkå°‚ç”¨åŒ–ã§ã‚·ãƒ³ãƒ—ãƒ«åŒ–**
- âœ… **å…¨ã¦ã®ãƒã‚§ãƒƒã‚¯é …ç›®ã‚’ã‚¯ãƒªã‚¢**

**Git Commit**: `ee357ae` â†’ `main`ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥å®Œäº†

ã“ã‚Œã§ã€Macå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆã«é€²ã‚€æº–å‚™ãŒæ•´ã„ã¾ã—ãŸï¼ğŸš€âœ¨
